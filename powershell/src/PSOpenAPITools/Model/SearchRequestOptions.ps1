#
# Glean Client API
# # Introduction These are the public APIs to enable implementing a custom client interface to the Glean system.  # Usage guidelines This API is evolving fast. Glean will provide advance notice of any planned backwards incompatible changes along with a 6-month sunset period for anything that requires developers to adopt the new versions.  # SDK Client bindings for the API can be generated for most popular languages (Python, Java, NodeJS, etc). To do so:  Download the OpenAPI specification for the API, by clicking on one of the following options: 1. [Download JSON specification](https://api.redocly.com/registry/bundle/glean/Glean%20Client%20API%20SDK%20source/v1/openapi.json?branch=main&download=true) 2. [Download YAML specification](https://api.redocly.com/registry/bundle/glean/Glean%20Client%20API%20SDK%20source/v1/openapi.yaml?branch=main&download=true)  Use [openapi-generator-cli](https://github.com/OpenAPITools/openapi-generator-cli) to generate bindings for your language of choice, for example: ```bash shell $ npx @openapitools/openapi-generator-cli@latest generate -i client_api.yaml -g go ```  To see available languages: ```bash shell $ npx @openapitools/openapi-generator-cli@latest list ```  Determine the host you need to connect to. This will be the URL of the backend for your Glean deployment, for example, customer-be.glean.com 
# Version: 0.9.0
# Contact: support@glean.com
# Generated by OpenAPI Generator: https://openapi-generator.tech
#

<#
.SYNOPSIS

No summary available.

.DESCRIPTION

No description available.

.PARAMETER DatasourceFilter
Filter results to a single datasource name (e.g. gmail, slack). All results are returned if missing.
.PARAMETER DatasourcesFilter
Filter results to one or more datasources (e.g. gmail, slack). All results are returned if missing.
.PARAMETER QueryOverridesFacetFilters
If true, the operators in the query are taken to override any operators in facetFilters in the case of conflict. This is used to correctly set rewrittenFacetFilters and rewrittenQuery.
.PARAMETER FacetFilters
A list of filters for the query. An AND is assumed between different facetFilters. For example, owner Sumeet and type Spreadsheet shows documents that are by Sumeet AND are Spreadsheets.
.PARAMETER FacetFilterSets
A list of facet filter sets that will be OR'ed together. SearchRequestOptions where both facetFilterSets and facetFilters set are considered as bad request. Callers should set only one of these fields.
.PARAMETER FacetBucketFilter
No description available.
.PARAMETER FacetBucketSize
The maximum number of FacetBuckets to return in each FacetResult.
.PARAMETER DefaultFacets
Facets for which FacetResults should be fetched and that don't apply to a particular datasource. If specified, these values will replace the standard default facets (last_updated_at, from, etc.). The requested facets will be returned alongside datasource-specific facets if searching a single datasource.
.PARAMETER AuthTokens
Auth tokens which may be used for non-indexed, federated results (e.g. Gmail).
.PARAMETER FetchAllDatasourceCounts
Hints that the QE should return result counts (via the datasource facet result) for all supported datasources, rather than just those specified in the datasource[s]Filter
.PARAMETER ResponseHints
Array of hints containing which fields should be populated in the response.
.PARAMETER TimezoneOffset
The offset of the client's timezone in minutes from UTC. e.g. PDT is -420 because it's 7 hours behind UTC.
.PARAMETER ForceNegation
Whether or not to force not ignoring of negation, i.e. force negated terms to be negated.
.PARAMETER DisableSpellcheck
Whether or not to disable spellcheck.
.PARAMETER DisableQueryAutocorrect
Disables automatic adjustment of the input query for spelling corrections or other reasons.
.PARAMETER ReturnLlmContentOverSnippets
[beta] Enables expanded content to be returned for LLM usage. The size of content per result returned should be modified using maxSnippetSize. Server may return less or more than what is specified in maxSnippetSize. For more details, https://docs.google.com/document/d/1CTOLSxWWT9WDEnHVLoCUaxbGYyXYP8kctPRF-RluSQY/edit. Requires sufficient permissions.
.OUTPUTS

SearchRequestOptions<PSCustomObject>
#>

function Initialize-SearchRequestOptions {
    [CmdletBinding()]
    Param (
        [Parameter(Position = 0, ValueFromPipelineByPropertyName = $true)]
        [String]
        ${DatasourceFilter},
        [Parameter(Position = 1, ValueFromPipelineByPropertyName = $true)]
        [String[]]
        ${DatasourcesFilter},
        [Parameter(Position = 2, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${QueryOverridesFacetFilters},
        [Parameter(Position = 3, ValueFromPipelineByPropertyName = $true)]
        [PSCustomObject[]]
        ${FacetFilters},
        [Parameter(Position = 4, ValueFromPipelineByPropertyName = $true)]
        [PSCustomObject[]]
        ${FacetFilterSets},
        [Parameter(Position = 5, ValueFromPipelineByPropertyName = $true)]
        [PSCustomObject]
        ${FacetBucketFilter},
        [Parameter(Position = 6, ValueFromPipelineByPropertyName = $true)]
        [Int32]
        ${FacetBucketSize},
        [Parameter(Position = 7, ValueFromPipelineByPropertyName = $true)]
        [String[]]
        ${DefaultFacets},
        [Parameter(Position = 8, ValueFromPipelineByPropertyName = $true)]
        [PSCustomObject[]]
        ${AuthTokens},
        [Parameter(Position = 9, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${FetchAllDatasourceCounts},
        [Parameter(Position = 10, ValueFromPipelineByPropertyName = $true)]
        [ValidateSet("RESULTS", "QUERY_METADATA")]
        [String[]]
        ${ResponseHints},
        [Parameter(Position = 11, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Int32]]
        ${TimezoneOffset},
        [Parameter(Position = 12, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${ForceNegation},
        [Parameter(Position = 13, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${DisableSpellcheck},
        [Parameter(Position = 14, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${DisableQueryAutocorrect},
        [Parameter(Position = 15, ValueFromPipelineByPropertyName = $true)]
        [System.Nullable[Boolean]]
        ${ReturnLlmContentOverSnippets}
    )

    Process {
        'Creating PSCustomObject: PSOpenAPITools => SearchRequestOptions' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        if ($null -eq $FacetBucketSize) {
            throw "invalid value for 'FacetBucketSize', 'FacetBucketSize' cannot be null."
        }


        $PSO = [PSCustomObject]@{
            "datasourceFilter" = ${DatasourceFilter}
            "datasourcesFilter" = ${DatasourcesFilter}
            "queryOverridesFacetFilters" = ${QueryOverridesFacetFilters}
            "facetFilters" = ${FacetFilters}
            "facetFilterSets" = ${FacetFilterSets}
            "facetBucketFilter" = ${FacetBucketFilter}
            "facetBucketSize" = ${FacetBucketSize}
            "defaultFacets" = ${DefaultFacets}
            "authTokens" = ${AuthTokens}
            "fetchAllDatasourceCounts" = ${FetchAllDatasourceCounts}
            "responseHints" = ${ResponseHints}
            "timezoneOffset" = ${TimezoneOffset}
            "forceNegation" = ${ForceNegation}
            "disableSpellcheck" = ${DisableSpellcheck}
            "disableQueryAutocorrect" = ${DisableQueryAutocorrect}
            "returnLlmContentOverSnippets" = ${ReturnLlmContentOverSnippets}
        }


        return $PSO
    }
}

<#
.SYNOPSIS

Convert from JSON to SearchRequestOptions<PSCustomObject>

.DESCRIPTION

Convert from JSON to SearchRequestOptions<PSCustomObject>

.PARAMETER Json

Json object

.OUTPUTS

SearchRequestOptions<PSCustomObject>
#>
function ConvertFrom-JsonToSearchRequestOptions {
    Param(
        [AllowEmptyString()]
        [string]$Json
    )

    Process {
        'Converting JSON to PSCustomObject: PSOpenAPITools => SearchRequestOptions' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        $JsonParameters = ConvertFrom-Json -InputObject $Json

        # check if Json contains properties not defined in SearchRequestOptions
        $AllProperties = ("datasourceFilter", "datasourcesFilter", "queryOverridesFacetFilters", "facetFilters", "facetFilterSets", "facetBucketFilter", "facetBucketSize", "defaultFacets", "authTokens", "fetchAllDatasourceCounts", "responseHints", "timezoneOffset", "forceNegation", "disableSpellcheck", "disableQueryAutocorrect", "returnLlmContentOverSnippets")
        foreach ($name in $JsonParameters.PsObject.Properties.Name) {
            if (!($AllProperties.Contains($name))) {
                throw "Error! JSON key '$name' not found in the properties: $($AllProperties)"
            }
        }

        If ([string]::IsNullOrEmpty($Json) -or $Json -eq "{}") { # empty json
            throw "Error! Empty JSON cannot be serialized due to the required property 'facetBucketSize' missing."
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "facetBucketSize"))) {
            throw "Error! JSON cannot be serialized due to the required property 'facetBucketSize' missing."
        } else {
            $FacetBucketSize = $JsonParameters.PSobject.Properties["facetBucketSize"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "datasourceFilter"))) { #optional property not found
            $DatasourceFilter = $null
        } else {
            $DatasourceFilter = $JsonParameters.PSobject.Properties["datasourceFilter"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "datasourcesFilter"))) { #optional property not found
            $DatasourcesFilter = $null
        } else {
            $DatasourcesFilter = $JsonParameters.PSobject.Properties["datasourcesFilter"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "queryOverridesFacetFilters"))) { #optional property not found
            $QueryOverridesFacetFilters = $null
        } else {
            $QueryOverridesFacetFilters = $JsonParameters.PSobject.Properties["queryOverridesFacetFilters"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "facetFilters"))) { #optional property not found
            $FacetFilters = $null
        } else {
            $FacetFilters = $JsonParameters.PSobject.Properties["facetFilters"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "facetFilterSets"))) { #optional property not found
            $FacetFilterSets = $null
        } else {
            $FacetFilterSets = $JsonParameters.PSobject.Properties["facetFilterSets"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "facetBucketFilter"))) { #optional property not found
            $FacetBucketFilter = $null
        } else {
            $FacetBucketFilter = $JsonParameters.PSobject.Properties["facetBucketFilter"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "defaultFacets"))) { #optional property not found
            $DefaultFacets = $null
        } else {
            $DefaultFacets = $JsonParameters.PSobject.Properties["defaultFacets"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "authTokens"))) { #optional property not found
            $AuthTokens = $null
        } else {
            $AuthTokens = $JsonParameters.PSobject.Properties["authTokens"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "fetchAllDatasourceCounts"))) { #optional property not found
            $FetchAllDatasourceCounts = $null
        } else {
            $FetchAllDatasourceCounts = $JsonParameters.PSobject.Properties["fetchAllDatasourceCounts"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "responseHints"))) { #optional property not found
            $ResponseHints = $null
        } else {
            $ResponseHints = $JsonParameters.PSobject.Properties["responseHints"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "timezoneOffset"))) { #optional property not found
            $TimezoneOffset = $null
        } else {
            $TimezoneOffset = $JsonParameters.PSobject.Properties["timezoneOffset"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "forceNegation"))) { #optional property not found
            $ForceNegation = $null
        } else {
            $ForceNegation = $JsonParameters.PSobject.Properties["forceNegation"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "disableSpellcheck"))) { #optional property not found
            $DisableSpellcheck = $null
        } else {
            $DisableSpellcheck = $JsonParameters.PSobject.Properties["disableSpellcheck"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "disableQueryAutocorrect"))) { #optional property not found
            $DisableQueryAutocorrect = $null
        } else {
            $DisableQueryAutocorrect = $JsonParameters.PSobject.Properties["disableQueryAutocorrect"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "returnLlmContentOverSnippets"))) { #optional property not found
            $ReturnLlmContentOverSnippets = $null
        } else {
            $ReturnLlmContentOverSnippets = $JsonParameters.PSobject.Properties["returnLlmContentOverSnippets"].value
        }

        $PSO = [PSCustomObject]@{
            "datasourceFilter" = ${DatasourceFilter}
            "datasourcesFilter" = ${DatasourcesFilter}
            "queryOverridesFacetFilters" = ${QueryOverridesFacetFilters}
            "facetFilters" = ${FacetFilters}
            "facetFilterSets" = ${FacetFilterSets}
            "facetBucketFilter" = ${FacetBucketFilter}
            "facetBucketSize" = ${FacetBucketSize}
            "defaultFacets" = ${DefaultFacets}
            "authTokens" = ${AuthTokens}
            "fetchAllDatasourceCounts" = ${FetchAllDatasourceCounts}
            "responseHints" = ${ResponseHints}
            "timezoneOffset" = ${TimezoneOffset}
            "forceNegation" = ${ForceNegation}
            "disableSpellcheck" = ${DisableSpellcheck}
            "disableQueryAutocorrect" = ${DisableQueryAutocorrect}
            "returnLlmContentOverSnippets" = ${ReturnLlmContentOverSnippets}
        }

        return $PSO
    }

}

